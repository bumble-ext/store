<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### Table of Contents

-   [Bumble Store][1]
-   [BumbleStore][2]
    -   [getState][3]
        -   [Parameters][4]
        -   [Examples][5]
    -   [setState][6]
        -   [Parameters][7]
        -   [Examples][8]
-   [onStateChange][9]
    -   [addListener][10]
        -   [Parameters][11]
        -   [Examples][12]
    -   [removeListener][13]
        -   [Parameters][14]
        -   [Examples][15]
    -   [haslistener][16]
        -   [Parameters][17]
        -   [Examples][18]
    -   [haslisteners][19]
        -   [Examples][20]
    -   [fireListeners][21]
        -   [Examples][22]
-   [StateSelector][23]
    -   [Parameters][24]
-   [StateAction][25]
    -   [Parameters][26]
-   [initStore][27]
    -   [Parameters][28]
    -   [Examples][29]
-   [getBackgroundPage][30]
    -   [Examples][31]

## Bumble Store

A flexible state management library for Chrome Extensions. Inspired by the React Component state API.


## BumbleStore

### getState

Returns copy of state object or value returned from mapping fn

#### Parameters

-   `keyOrFn` **([string][32] \| [StateSelector][33])** key name or fn :: {state} -> any

#### Examples

```javascript
getState('apples').then((apples) => {
  console.log(apples)
})
```

Returns **[Promise][34]** Resolves with the state object or the value of the state property.

### setState

Sets state asynchronously using a state object or a function that returns an object.

#### Parameters

-   `newStateOrFn` **([string][32] \| [StateAction][35])** key name or fn :: {state} -> {state}

#### Examples

```javascript
setState({ apples: 2 })
  .then((state) => {
    console.log('Number of apples:', state.apples)
  })
```

Returns **[Promise][34]&lt;[Object][36]>** Resolves to a copy of the new state object.

## onStateChange

### addListener

Adds a listener function to onStateChange.

#### Parameters

-   `listener` **[Function][37]** A state property name or fn :: {state} -> any

#### Examples

```javascript
store.onStateChange.addListener(fn)
```

Returns **[undefined][38]** Returns undefined.

### removeListener

Removes a listener from onStateChange.

#### Parameters

-   `listener` **[Function][37]** The listener function to remove.

#### Examples

```javascript
store.onStateChange.removeListener(fn)
```

Returns **[undefined][38]** Returns undefined.

### haslistener

Returns true if onStateChange has the listener.

#### Parameters

-   `listener` **[Function][37]** Function to match.

#### Examples

```javascript
store.onStateChange.hasListener(fn)
```

Returns **[boolean][39]** Returns true if onStateChange has the listener.

### haslisteners

Returns true if function has any listeners.

#### Examples

```javascript
store.onStateChange.hasListeners()
```

Returns **[boolean][39]** Returns true onStateChange has any listeners.

### fireListeners

Calls all the onStateChange listeners.

#### Examples

```javascript
store.onStateChange.fireListeners()
```

Returns **[undefined][38]** Returns undefined.

## StateSelector

Derive a value from the current state.

Type: [Function][37]

### Parameters

-   `state` **[Object][36]** The current state.

Returns **any** Any derived value.

## StateAction

Map the state object at the time setState() fires.

Type: [Function][37]

### Parameters

-   `state` **[Object][36]** A copy of current state object.

Returns **[Object][36]** The new state object.

## initStore

Sets up state and immediately calls the callback.
Sets window.store as a Promise that resolves with the store after the callback completes.

### Parameters

-   `initialState` **[Object][36]** The initial state values.

### Examples

```javascript
const {} = store.initStore({ apples: 2 })
```

```javascript
const defaultState = { apples: 2 }
storageLocal.get('state')
  .then(({state = defaultState}) => state)
  .then(store.initStore)
  .then(({ setState, getState, onStateChange }) => {
    console.log('Store has been initialized.')
  })
```

Returns **[BumbleStore][40]** The initialized store.

## getBackgroundPage

Retrieves the Window object for the background page running inside the current extension.
If the background page is unloaded, this will load the background page before resolving.

See
[Chrome API Docs][41]
and
[MDN][42].

### Examples

```javascript
getBackgroundPage().then((bgWindow) => {
  // The background page window.
})
```

Returns **[Promise][34]&lt;[Window][43]>** A Promise that will be fulfilled with the Window object for the background page, if there is one.

[1]: #bumble-store

[2]: #bumblestore

[3]: #getstate

[4]: #parameters

[5]: #examples

[6]: #setstate

[7]: #parameters-1

[8]: #examples-1

[9]: #onstatechange

[10]: #addlistener

[11]: #parameters-2

[12]: #examples-2

[13]: #removelistener

[14]: #parameters-3

[15]: #examples-3

[16]: #haslistener

[17]: #parameters-4

[18]: #examples-4

[19]: #haslisteners

[20]: #examples-5

[21]: #firelisteners

[22]: #examples-6

[23]: #stateselector

[24]: #parameters-5

[25]: #stateaction

[26]: #parameters-6

[27]: #initstore

[28]: #parameters-7

[29]: #examples-7

[30]: #getbackgroundpage

[31]: #examples-8

[32]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String

[33]: #stateselector

[34]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise

[35]: #stateaction

[36]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object

[37]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function

[38]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/undefined

[39]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean

[40]: #bumblestore

[41]: https://developer.chrome.com/extensions/runtime#method-getBackgroundPage

[42]: https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/API/runtime/getBackgroundPage

[43]: https://developer.mozilla.org/docs/Web/API/Window
